<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>
      PN Search
    </title>
    <link rel="stylesheet" href="/css/master.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="/css/custom-theme/jquery-ui-1.8.5.custom.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="/css/jquery.bubblepopup.v2.1.5.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <script src="/js/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/jquery-ui.custom.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/js/jquery.bubblepopup.v2.1.5.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">

    </script>
  </head>
  <body onload="init()">
    <div id="d" class="page">
      <div id="hd">
        <h1>
          Papyri.info
        </h1>
      </div>
      <div id="bd">
        <div class="nav">
          <!-- left nav -->
          <form method="get" accept-charset="utf-8">
            <ul class="nav ui-corner-all">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/ddbdp/">Browse DDbDP</a>
              </li>
              <li>
                <a href="/hgv/">Browse HGV</a>
              </li>
              <li>
                <a href="/apis/">Browse APIS</a>
              </li>
              <li class="dialog" id="tm" title="TM Number" ><div id="tmc">TM#: <input type="text" name="tmid" value="[enter TM#]" id="tmid" onclick="this.setAttribute('value','');this.focus();" size="10"/> <input onclick="window.location='/trismegistos/'+jQuery('#tmid').attr('value');" type="button" name="tmgo" id="tmgo" value=" &gt; " /></div>
              </li>
              <li>
                <a href="/search">Search</a>
              </li>
            </ul>
          </form>
        </div>
        <div id="main">
          <div class="content ui-corner-all search">
            <!-- Search form -->
            <form action="/search" method="post" accept-charset="UTF-8" name="searchform">
              <div>
                <p><input type="radio" name="type" value="phrase" id="phrase" onchange="if(this.checked){this.form.target.selectedIndex=0}"> <label for="phrase" id="phrase-label">phrase search</label> <input type="radio" name="type" value="substring" id="substring" checked onchange="if(this.checked){this.form.target.selectedIndex=1}"> <label for="substring" id="substring-label">substring search</label> <input type="radio" name="type" value="proximity" id="proximity"> <label for="proximity" id="proximity-label">find within</label> <input type="text" name="within" value="10" id="within" size="2" style="width:1.5em"></p>
                <p><input type="text" name="keyword" value="" id="keyword" size="80"> in <select name="target" id="target" onchange="if(this.form.substring.checked){this.selectedIndex=1}if(this.selectedIndex!=1 && this.form.substring.checked){this.form.phrase.checked}" size="1">
                  <option value="all">
                    All
                  </option>
                  <option value="text" selected>
                    Text
                  </option>
                  <option value="metadata">
                    Metadata
                  </option>
                  <option value="translation">
                    Translations
                  </option>
                </select></p>
                <div id="search-options"><p><input type="checkbox" name="beta" id="betaYes" value="on"> <label for="betaYes" id="betaYes-label">search text is in Beta Code</label> <input type="checkbox" name="caps" id="caps" value="on" checked> <label for="caps" id="caps-label">ignore capitalization</label> <input type="checkbox" name="marks" id="marks" value="on" checked> <label for="marks" id="marks-label">ignore diacritics/accents</label> <input type="checkbox" name="lemmas" id="lemmas" onchange="if(this.checked){this.form.caps.disabled=true;this.form.marks.disabled=true;this.form.target.selectedIndex=1;}"> <label for="lemmas" id="lemmas-label">lemmatized search</label></p></div>
              </div>
              <div>
                <p><label for="provenance">Provenance:</label> <input type="text" name="provenance" value="" id="provenance"></p>
                <p>Date <label for="date_start">on or after</label> <input type="text/submit/hidden/button" name="date_start" value="" id="date_start"> <select name="start_era" id="start_era" onchange="" size="1">
                  <option value="bce">
                    BCE
                  </option>
                  <option value="ce">
                    CE
                  </option>
                </select> <label for="date_end">on or before</label> <input type="text" name="date_end" value="" id="date_end"> <select name="end_era" id="end_era" onchange="" size="1">
                  <option value="bce">
                    BCE
                  </option>
                  <option value="ce">
                    CE
                  </option>
                </select></p>
                <p><label for="ddbseries">DDbDP Series:</label> <select name="ddbseries" id="ddbseries" onchange="" size="1"><option value="">All</option>
                </select>  <!-- <label for="hgvseries">HGV Series:</label> <select name="hgvseries" id="hgvseries" onchange="" size="1"><option value="">All</option>
                  </select> --><label for="volume">Volume:</label> <input type="text" name="volume" id="volume" size="3"></p>
                <p><label for="apiscol">APIS collection:</label> <select name="apiscol" id="apiscol" onchange="" size="1"><option value="">All</option>
                </select> <label for="invnum"><strong>Inventory Number <span class="pn-note">(APIS only)</span></strong></label> <input id="invnum" name="invnum" size="5" maxlength="25" value="" type="text"> <span class="comment" style="font-weight: normal;">e.g."186a"</span></p>
                <p id="sort-options">Show records with <label for="imagesfirst" id="imagesfirst-label">images first</label><input type="checkbox" name="imagesfirst" value="yes" id="imagesfirst"> <label for="translationsfirst" id="translationsfirst-label">translations first</label><input type="checkbox" name="translationsfirst" value="" id="translationsfirst"></p>
              </div>
              <p style="text-align:center;font-size:123.1%">
                <a href="#" class="button" id="showeg">Examples</a>
                <input type="checkbox" id="togglehelp" onchange="toggleHelp()" autocomplete="off"><label for="togglehelp" id="togglehelp-label">Help</label>
                <input type="submit" value="Search" id="search" style="height:52px">
              </p>
            </form><!-- Search form end -->
          </div>
          <div id="help">
            <div id="phrase-help">Phrase search uses the query syntax built in to the Lucene search engine.  For example, you can do wildcard searches using * for multiple missing characters and ? for a single missing character (e.g. Καισ*).  Phrase searches can ignore or use diacritics and capitalization.  Wildcards cannot appear at the beginning of a word. For more details, see <a href="http://lucene.apache.org/java/3_0_2/queryparsersyntax.html">Lucene query syntax</a>.</div>
            <div id="substring-help">Substring searches look for text occurring anywhere in a word, even in the middle.  Use the ^ character to mark a word-boundary (e.g. "^και^ ^υπο"). Terms must be at least 3 characters long (carets included). To search for one term followed by another, enclose the whole search string in quotes.  Substring searches do not take diacritics or capitalization into account.</div>
            <div id="proximity-help">Proximity searches look for terms near to one another, within the specified number of words.</div>
            <div id="betaYes-help">Beta code allows you to search for Greek characters using a non-Greek character set. The following Roman alphabet characters represent the Greek equivalences:
              <ul>
                <li>η (eta) = h</li>
                <li>θ (theta) = q</li>
                <li>ξ (xi) = c</li>
                <li>χ (chi) = x</li>
                <li>ψ (psi) = y</li>
                <li>ω (omega) = w</li>
                <li>σ (medial sigma) = s1</li>
              </ul>
            <b>Use s1 for medial sigma at the end of a search term (e.g. ^kais1 (= ^καισ) rather than ^kais (= ^καις).  You cannot use beta code to search for Latin terms</b>.</div>
            <div id="lemmas-help">Lemmatized Search searches for all forms of the entered dictionary headword (Greek only for now). For words that have lemmas identical to other words (like δέω, e.g.), you may append a number corresponding to the article's order in LSJ. If you do not append a number, the search will be done on all forms of all corresponding lemmas.</div>
          </div>
          <div id="examples" style="display:none;text-align:left">
            <h3>Lemmatized searches</h3>
            <ul>
              <li><a href="#" class="eg" id="lemma_eg">find all forms of λύω</a></li>
              <li><a href="#" class="eg" id="lemma_plus_eg">find all forms of λύω + Φιλώτας</a></li>
            </ul>
            <h3>Substring Searches</h3>
            <ul>
              <li><a href="#" class="eg" id="substring_anchor_eg">^στρατηγ / finds e.g. στρατηγo but not επιστρατηγο</a></li>
              <li><a href="#" class="eg" id="substring_anchor_beta_eg">^strathg / finds e.g. στρατηγo but not επιστρατηγο (search text is in Beta Code)</a></li>
              <li><a href="#" class="eg" id="substring_eg">στρατηγ / finds e.g. στρατηγo and επιστρατηγο</a></li>
              <li><a href="#" class="eg" id="substring_anchors_eg">^των^ / finds only των</a></li>
              <li><a href="#" class="eg" id="substring_end_anchor_eg">των^ / finds e.g. ὑπαρχόντων but not τῶνδε</a></li>
              <li><a href="#" class="eg" id="substring_anchor_multi_eg">"men^ ^ka" / finds e.g. ἀπέχομεν καὶ</a></li>
            </ul>
            <h3>Phrase searches</h3>
            <ul>
              <li><a href="#" class="eg" id="phrase_eg">στρατηγ* / finds e.g. στρατηγo but not επιστρατηγο</a></li>
              <li><a href="#" class="eg" id="phrase_beta_eg">epi*men / finds e.g. ἐπιδεδώκαμεν (search text is in Beta Code)</a></li>
              <li><a href="#" class="eg" id="phrase_multi_eg">"αναγκαιας χρειας" / finds e.g. ἀναγκαία̣ς χ[ρ]είας</a></li>
            </ul>
            <h3>Boolean searches</h3>
            <ul>
              <li><a href="#" class="eg" id="substring_boolean_eg">^καισ NOT ^καισαρ</a></li>
              <li><a href="#" class="eg" id="phrase_boolean_eg">στρατηγου OR στρατηγω</a></li>
              <li><a href="#" class="eg" id="substring_and_eg">^καισ ^σεβαστ (AND is the default)</a></li>
            </ul>
            <h3>Proximity searches</h3>
            <ul>
              <li><a href="#" class="eg" id="proximity_eg">αναγκαιας χρειας / finds e.g. ἀναγκαίας μου χρείας</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer ui-corner-all">
        papyri.info is produced by <a href="http://dlib.nyu.edu/dlts/">NYU Digital Library Technology Services</a> and the <a href="http://www.nyu.edu/isaw/">Institute for the Study of the Ancient World</a>.
      </div>
    </div>
    <script type="text/javascript" charset="utf-8">
      jQuery("a.button").button();
      jQuery("#tmgo").button();
      jQuery("#phrase,#substring,#proximity").button();
      jQuery("#betaYes,#caps,#marks,#lemmas").button();
      jQuery("#imagesfirst,#translationsfirst").button();
      jQuery("#togglehelp,#search,#newsearch").button();
      jQuery("#newsearch").click(function(){
        jQuery("#hidesearch").show();
        jQuery(this).hide();
      });
      jQuery("#showeg").click(function() {
        jQuery("#examples").dialog({
          position:["right","top"]
        });
        jQuery("#examples").show();
      });
      jQuery.getJSON("/ddbdp/json", function(data) {
        var series = jQuery("#ddbseries");
        jQuery.each(data.results.bindings, function(i, row) {
          var val = row.object.value.substr(row.object.value.lastIndexOf("/") + 1);
          series.append('<option value="' + val + '">'+ val + '</option');
        })
      });
      //jQuery.getJSON("/hgv/json", function(data) {
      //  var series = jQuery("#hgvseries");
      //  jQuery.each(data.results.bindings, function(i, row) {
      //    var val = row.object.value.substr(row.object.value.lastIndexOf("/") + 1);
      //    series.append('<option value="' + val + '">'+ val + '</option');
      //  })
      //});
      jQuery.getJSON("/apis/json", function(data) {
        var apis = jQuery("#apiscol");
        jQuery.each(data.results.bindings, function(i, row) {
          var val = row.object.value.substr(row.object.value.lastIndexOf("/") + 1);
          apis.append('<option value="' + val + '">'+ val + '</option');
        })
      });
      var help = false;
      function init() {
        jQuery("li.dialog").each(function(i) {
          jQuery(this).after("<li><a href=\"#\" onclick=\"javascript:jQuery('#"+this.id+"').dialog()\">"+this.title+"<\/a><\/li>");
          jQuery(this).hide();
        });
        jQuery("#togglehelp-label").CreateBubblePopup({
          innerHtml: "Click to turn contextual help for the search form on and off.",
          position: "left"
        });
        jQuery("ul.nav li").not(".dialog").hover(function() {
              jQuery(this).css('background-color', '#445B88');
              jQuery(this).find("a").css('color', 'white')
          },
          function() {
              jQuery(this).css('background-color', 'transparent');
              jQuery(this).find("a").css('color', 'black')
          });
      }
      function toggleHelp() {
        if(!help) {
          help = true;
          jQuery("#help div").each(function() {
            var helptext = this.innerHTML;
            //alert("#" + this.id.substring(0, this.id.indexOf("-")) + "-span");
            var label = jQuery("#" + this.id.substring(0, this.id.indexOf("-")) + "-label");
            label.CreateBubblePopup(
                  {
                     innerHtml: helptext, 
                     innerHtmlStyle: {
                       'text-align':'left'
                       },
                     width: 350,
                     position: label.offset().left > 600? "left" : "right",
                     closingDelay: 2000
                  });
          });
        } else {
          help = false;
          jQuery("#help div").each(function() {
            jQuery("#" + this.id.substring(0, this.id.indexOf("-")) + "-label").RemoveBubblePopup();
          });
        }
      }
      function setupSearch(opts) {
        resetSearch();
        for (var property in opts) {
          var elt = jQuery("#" + property);
          if (opts[property] == true || opts[property] == false) {
            if (elt[0].checked != opts[property]) {
              jQuery("#" + property + ",#" + property + "-label").trigger("click");
            }
          }
          else if (isNaN(opts[property])) {
            elt[0].value = opts[property];
          } else {
            if (elt.is("select")) {
              elt[0].selectedIndex = opts[property];
            } else {
              elt[0].value = opts[property];
            }
          }
        }
      }
      function resetSearch() {
        if (jQuery("#phrase")[0].checked){
          jQuery("#phrase,#phrase-label").trigger("click");
        }
        if (!jQuery("#substring")[0].checked){
          jQuery("#substring,#substring-label").trigger("click");
        }
        if (jQuery("#proximity")[0].checked){
          jQuery("#proximity,#proximity-label").trigger("click");
        }
        jQuery("#keyword")[0].value = "";
        jQuery("#target")[0].selectedIndex = 1;
        if (jQuery("#betaYes")[0].checked){
          jQuery("#betaYes,#betaYes-label").trigger("click");
        }
        if (!jQuery("#caps")[0].checked){
          jQuery("#caps,#caps-label").trigger("click");
        }
        if (!jQuery("#marks")[0].checked){
          jQuery("#marks,#marks-label").trigger("click");
        }
        if (jQuery("#lemmas")[0].checked){
          jQuery("#lemmas,#lemmas-label").trigger("click");
        }
      }
      jQuery("#lemma_eg").click(function() {
        setupSearch(
          {keyword:"λύω",
           lemmas:true,
           phrase:true})
      });
      jQuery("#lemma_plus_eg").click(function() {
        setupSearch(
          {keyword:"transcription_l:λύω φιλωτας",
           phrase:true})
      });
      jQuery("#substring_anchor_eg").click(function() {
        setupSearch(
          {keyword:"^στρατηγ",
           substring:true})
      });
      jQuery("#substring_anchor_beta_eg").click(function() {
        setupSearch(
          {keyword:"^στρατηγ",
           substring:true,
           betaYes:true})
      });
      jQuery("#substring_eg").click(function() {
        setupSearch(
          {keyword:"στρατηγ",
           substring:true})
      });
      jQuery("#substring_anchors_eg").click(function() {
        setupSearch(
          {keyword:"^των^",
           substring:true})
      });
      jQuery("#substring_end_anchor_eg").click(function() {
        setupSearch(
          {keyword:"των^",
           substring:true})
      });
      jQuery("#substring_anchor_multi_eg").click(function() {
        setupSearch(
          {keyword:"\"men^ ^ka\"",
           substring:true})
      });
      jQuery("#phrase_eg").click(function() {
        setupSearch(
          {keyword:"στρατηγ*",
           phrase:true})
      });
      jQuery("#phrase_beta_eg").click(function() {
        setupSearch(
          {keyword:"epi*men",
           phrase:true,
           betaYes:true})
      });
      jQuery("#phrase_multi_eg").click(function() {
        setupSearch(
          {keyword:"\"αναγκαιας χρειας\"",
           phrase:true})
      });
      jQuery("#substring_boolean_eg").click(function() {
        setupSearch(
          {keyword:"^καισ NOT ^καισαρ",
           substring:true})
      });
      jQuery("#phrase_boolean_eg").click(function() {
        setupSearch(
          {keyword:"στρατηγου OR στρατηγω",
           phrase:true})
      });
      jQuery("#substring_and_eg").click(function() {
        setupSearch(
          {keyword:"^καισ ^σεβαστ",
           substring:true})
      });
      jQuery("#proximity_eg").click(function() {
        setupSearch(
          {keyword:"αναγκαιας χρειας",
           proximity:true,
           within:"3"})
      });
    </script>
  </body>
</html>
